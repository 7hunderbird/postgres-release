---
name: pgbackrest

description: "Utility for PostgreSQL continuous archiving and point in time restore (PITR)"

templates:
  pre-start.sh.erb: bin/pre-start
  post-start.sh.erb: bin/post-start
  pgbackrest_ctl.sh.erb: bin/pgbackrest_ctl
  backup_scheduler.sh.erb: bin/backup_scheduler.sh
  backup.sh.erb: bin/backup.sh
  archive_wal.sh: bin/archive_wal.sh
  create_stanza.sh.erb: bin/create_stanza.sh
  config.sh.erb: config/config.sh
  pgbackrest.conf.erb: config/pgbackrest.conf

packages:
  - pgbackrest
  - perl-modules

consumes:
- name: database
  type: database
  optional: true

properties:
  backup.interval:
    description: "Interval between scheduled backups. Set to 0 not to run backup."
    default: 86400
  pgbackrest.cipher_pass:
    default: ''
  stanza.name:
    default: "postgres1"
  stanza.postgres.port:
    default: 5432
    description: "The database port (not used when using links)"
